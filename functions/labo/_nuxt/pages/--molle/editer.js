(window.webpackJsonp=window.webpackJsonp||[]).push([[6,2,3,10,12],{317:function(t,e,o){},318:function(t,e,o){},319:function(t,e,o){"use strict";o(317)},320:function(t,e,o){"use strict";o(318)},321:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var n=o(9),r=o(18),c=(o(8),o(72),o(7),o(24)),l=function(){function t(){Object(n.a)(this,t)}return Object(r.a)(t,null,[{key:"setMeta",value:function(t){var e={title:"",meta:[]};return e.title=t.title||t.displayTitle||"",t.description&&e.meta.push({hid:"description",name:"description",content:t.description},{hid:"og:description",property:"og:description",content:t.description}),t.ogpImg&&e.meta.push({hid:"og:image",property:"og:image",content:t.ogpImg},{hid:"twitter:image",property:"twitter:image",content:t.ogpImg}),t.ogpImg&&e.meta.push({hid:"og:image",property:"og:image",content:t.ogpImg},{hid:"twitter:image",property:"twitter:image",content:t.ogpImg}),e}},{key:"getPageData",value:function(t){return t.$nuxt.context.isDev,c.a.getCurrentPageData(t.$route)}},{key:"getPageList",value:function(t,e,o,n){var r=[];function l(t,e){var o=e&&e.sort||"asc",n=e&&e.attr;return t.sort((function(a,b){return n?a[n]<b[n]==("desc"==o)?1:-1:a<b==("desc"==o)?1:-1})),e&&e.max&&e.max<t.length&&(t.length=e.max),t}e.isDev,c.a.firebaseInit((function(){c.a.pagesRef.onSnapshot((function(e){e.forEach((function(e){var o=e.data();0==o.path.indexOf(t+"/")&&r.push(o)})),l(r,n),o(r)}))}))}}]),t}()},322:function(t,e,o){"use strict";o.r(e);o(21);var n=o(9),r=o(18),c=o(13),l=o(14),f=o(4),d=o(12),m=(o(3),o(5));function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(f.a)(t);if(e){var r=Object(f.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(l.a)(this,o)}}var v=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},y=function(t){Object(c.a)(o,t);var e=h(o);function o(){var t;return Object(n.a)(this,o),(t=e.apply(this,arguments)).isMenuOpen=!1,t}return Object(r.a)(o,[{key:"mounted",value:function(){}}]),o}(m.Vue),O=y=v([Object(m.Component)({components:{}})],y),_=(o(319),o(15)),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("header",{staticClass:"global-header",attrs:{"aria-expanded":t.isMenuOpen}},[t._m(0),o("div",{staticClass:"global-header__menu"},[o("button",{staticClass:"global-header__menu__btn isSp",attrs:{type:"button"},on:{click:function(){return t.isMenuOpen=!t.isMenuOpen}}},[o("span",{staticClass:"global-header__menu__btn__line"}),o("span",{staticClass:"global-header__menu__btn__label"})]),t._m(1)])])}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a",{staticClass:"company-name",attrs:{href:"/"}},[o("span",[t._v("LOGO")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",{staticClass:"global-header__menu__body"},[o("li",{staticClass:"global-header__menu__item"},[o("a",{attrs:{href:"/about"}},[o("span",[t._v("About")])])]),o("li",{staticClass:"global-header__menu__item"},[o("a",{attrs:{href:"/news"}},[o("span",[t._v(" News")])])]),o("li",{staticClass:"global-header__menu__item"},[o("a",{attrs:{href:"/qa"}},[o("span",[t._v(" Q&A")])])]),o("li",{staticClass:"global-header__menu__item"},[o("a",{attrs:{href:"/contact"}},[o("span",[t._v(" Contact")])])])])}],!1,null,null,null);e.default=component.exports},323:function(t,e,o){"use strict";o.r(e);o(21);var n=o(9),r=o(13),c=o(14),l=o(4),f=o(12),d=(o(3),o(5));function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(l.a)(t);if(e){var r=Object(l.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(c.a)(this,o)}}var h=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},v=function(t){Object(r.a)(o,t);var e=m(o);function o(){return Object(n.a)(this,o),e.apply(this,arguments)}return o}(d.Vue);v.MOLLE_DELETE_WITH_STATIC_MODE=!0;var y=v=h([Object(d.Component)({components:{}})],v),O=(o(320),o(15)),component=Object(O.a)(y,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("footer",{staticClass:"global-footer"},[o("small",[t._v("Copyright © All Rights Reserved.")])])}],!1,null,null,null);e.default=component.exports},324:function(t,e,o){},327:function(t,e,o){"use strict";o(324)},328:function(t,e,o){},329:function(t,e,o){"use strict";o.r(e);o(21);var n=o(44),r=o(9),c=o(18),l=o(13),f=o(14),d=o(4),m=o(12),h=(o(75),o(3),o(5)),v=o(321);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var O=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},_=function(t){Object(l.a)(f,t);var e,o=y(f);function f(){var t;return Object(r.a)(this,f),(t=o.apply(this,arguments)).pageData={},t}return Object(c.a)(f,[{key:"fetch",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.t1=this,t.next=4,v.a.getPageData(this);case 4:if(t.t2=t.sent,t.t2){t.next=7;break}t.t2=this.pageDataByEditer;case 7:t.t3=t.t2,t.t0.$set.call(t.t0,t.t1,"pageData",t.t3);case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"head",value:function(){return v.a.setMeta(this.pageData||this.pageDataByEditer)}}]),f}(h.Vue);O([Object(h.Prop)({default:function(){return{}}})],_.prototype,"pageDataByEditer",void 0);var j=_=O([Object(h.Component)({components:{}})],_),C=(o(327),o(15)),component=Object(C.a)(j,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"l-body universal"},[o("GlobalHeaderComp"),o("article",{staticClass:"l-content"},[o("Headline",{attrs:{static__value:t.pageData.displayTitle||t.pageData.title,static__option:{lv:"h2"}}}),t.pageData.itemId?o("ModuleLoader",{attrs:{node:{id:t.pageData.itemId}}}):t._e()],1),o("GlobalFooterComp")],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{GlobalHeaderComp:o(322).default,GlobalFooterComp:o(323).default})},333:function(t,e,o){"use strict";o(328)},337:function(t,e,o){},338:function(t,e,o){},339:function(t,e,o){},340:function(t,e,o){},341:function(t,e,o){},342:function(t,e,o){},343:function(t,e,o){},344:function(t,e,o){},345:function(t,e,o){},346:function(t,e,o){},350:function(t,e,o){"use strict";o.r(e);o(21);var n=o(44),r=o(9),c=o(18),l=o(13),f=o(14),d=o(4),m=o(12),h=(o(75),o(3),o(5)),v=o(321);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var O=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},_=function(t){Object(l.a)(f,t);var e,o=y(f);function f(){var t;return Object(r.a)(this,f),(t=o.apply(this,arguments)).pageData={},t}return Object(c.a)(f,[{key:"fetch",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.t1=this,t.next=4,v.a.getPageData(this);case 4:if(t.t2=t.sent,t.t2){t.next=7;break}t.t2=this.pageDataByEditer;case 7:t.t3=t.t2,t.t0.$set.call(t.t0,t.t1,"pageData",t.t3);case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"head",value:function(){return v.a.setMeta(this.pageData||this.pageDataByEditer)}}]),f}(h.Vue);O([Object(h.Prop)({default:function(){return{}}})],_.prototype,"pageDataByEditer",void 0);var j=_=O([Object(h.Component)({components:{}})],_),C=(o(333),o(15)),component=Object(C.a)(j,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"l-body news-detail"},[o("GlobalHeaderComp"),o("article",{staticClass:"l-content"},[o("div",{staticClass:"container"},[o("p",{staticClass:"news-detail__date",domProps:{innerHTML:t._s(t.pageData.date)}}),o("Headline",{attrs:{static__value:t.pageData.displayTitle||t.pageData.title,static__option:{lv:"h2"}}}),t.pageData.itemId?o("ModuleLoader",{attrs:{node:{id:t.pageData.itemId}}}):t._e()],1)]),o("GlobalFooterComp")],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{GlobalHeaderComp:o(322).default,GlobalFooterComp:o(323).default})},354:function(t,e,o){"use strict";o(337)},355:function(t,e,o){"use strict";o(338)},356:function(t,e,o){"use strict";o(339)},357:function(t,e,o){"use strict";o(340)},358:function(t,e,o){"use strict";o(341)},359:function(t,e,o){"use strict";o(342)},360:function(t,e,o){"use strict";o(343)},361:function(t,e,o){"use strict";o(344)},362:function(t,e,o){"use strict";o(345)},363:function(t,e,o){"use strict";o(346)},365:function(t,e,o){"use strict";o.r(e);o(21),o(10),o(8),o(6),o(7),o(11);var n=o(1),r=o(9),c=o(18),l=o(13),f=o(14),d=o(4),m=o(12),h=(o(3),o(22),o(49),o(5)),v=o(24),y=o(37);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var _=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},j=function(t){Object(l.a)(o,t);var e=O(o);function o(){return Object(r.a)(this,o),e.apply(this,arguments)}return Object(c.a)(o,[{key:"created",value:function(){}},{key:"mounted",value:function(){}}]),o}(h.Vue);_([Object(h.Prop)()],j.prototype,"itemId",void 0);var C=j=_([Object(h.Component)({components:{}})],j),D=(o(354),o(15)),R=Object(D.a)(C,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"item-list-view-comp"},[o("div",{staticClass:"card bg-light"},[o("div",{staticClass:"card-header pt-1 pb-1 pl-3 pr-3 text-right"},[t._v("構造/Structure")]),o("div",{staticClass:"list-group"},[o("div",{staticClass:"item-list-item-comp list-group-item list-group-item-action p-0 border-right-0"},[o("button",{staticClass:"btn btn-sm btn-link btn-block text-left",class:{active:!this.$route.query.focus},on:{click:function(e){return t.$router.push({query:Object.assign({},t.$route.query,{focus:0})})},mouseover:function(e){return t.$router.push({query:Object.assign({},t.$route.query,{focus:0})})}}},[o("b-icon",{staticClass:"ml-n1 mr-1",attrs:{icon:"window"}}),o("b",[t._v("Page")])],1)]),o("ItemListItemComp",{attrs:{node:{id:t.itemId},isRoot:!0}})],1)])])}),[],!1,null,null,null).exports;o(28),o(20),o(30);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var x=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},P=function(t){Object(l.a)(o,t);var e=w(o);function o(){var t;return Object(r.a)(this,o),(t=e.apply(this,arguments)).itemId="",t.itemData={},t.flag=!1,t.logDataUpdate="",t.isShow=!1,t}return Object(c.a)(o,[{key:"onChangeLogsData",value:function(){"object"===Object(m.a)(this.logData.timestamp)&&(this.logData.timestamp=this.logData.timestamp.toDate().toLocaleString({timeZone:"Asia/Tokyo"})),this.logData.update&&(this.logDataUpdate=JSON.stringify(this.logData.update),this.logDataUpdate=this.logDataUpdate.replace(/,/g,"<br>"))}}]),o}(h.Vue);x([Object(h.Prop)()],P.prototype,"logData",void 0),x([Object(h.Watch)("logData",{immediate:!0})],P.prototype,"onChangeLogsData",null);var I=P=x([Object(h.Component)({components:{}})],P),$=(o(355),Object(D.a)(I,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"log-data-comp"},[t.logData.timestamp?o("div",{staticClass:"log-list-data"},[o("button",{staticClass:"btn btn-sm btn-outline-secondary",domProps:{innerHTML:t._s("timestamp　"+t.logData.timestamp)},on:{click:function(e){t.isShow=!t.isShow}}}),t.isShow?o("div",{staticClass:"p-2"},[o("p",{staticClass:"mb-0"},[t._v("uid　"),o("span",{staticClass:"log-list-data-uid",domProps:{innerHTML:t._s(t.logData.uid)}})]),t.logDataUpdate?o("p",{staticClass:"mb-0"},[t._v("update　"),o("span",{staticClass:"log-list-data-update",domProps:{innerHTML:t._s(t.logDataUpdate)}})]):t._e()]):t._e()]):t._e()])}),[],!1,null,null,null).exports);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var N=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},E=function(t){Object(l.a)(o,t);var e=k(o);function o(){var t;return Object(r.a)(this,o),(t=e.apply(this,arguments)).itemData={},t.itemDataBefore={},t.flag=!1,t.isShow=!1,t.logDataList=null,t}return Object(c.a)(o,[{key:"init",value:function(){var t=this;console.log(this.itemId),v.a.logsRef.doc(this.itemId).get().then((function(e){e.exists&&(console.log(e.data()),t.$set(t,"logDataList",e.data()||[]))}))}}]),o}(h.Vue);N([Object(h.Prop)()],E.prototype,"itemId",void 0);var M=E=N([Object(h.Component)({components:{LogDataComp:$}})],E),A=(o(356),Object(D.a)(M,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"log-property-comp"},[o("button",{staticClass:"btn btn-sm btn-secondary",on:{click:t.init}},[t._v("ログ")]),t.logDataList?o("div",[o("ul",t._l(t.logDataList.history,(function(t){return o("li",[o("LogDataComp",{attrs:{logData:t}})],1)})),0)]):t._e()])}),[],!1,null,null,null).exports);function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var T=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},L=function(t){Object(l.a)(o,t);var e=B(o);function o(){var t;return Object(r.a)(this,o),(t=e.apply(this,arguments)).itemId="",t.itemData={},t.itemDataBefore={},t.changeModuleSelected="",t.flag=!1,t.pageFlag=!0,t.maxHistory=100,t.firestoreUrl="https://console.firebase.google.com/project/".concat("molle-cms---dev","/firestore/data/").concat(["labo","beta","items",""].join("~2F")),t}return Object(c.a)(o,[{key:"onChangeFocusModuleNode",value:function(t,e){var o=this;t&&(console.log("onChangeFocusModuleNode"),this.flag=!1,this.unsubscribe&&this.unsubscribe(),this.unsubscribe=v.a.itemsRef.doc(t).onSnapshot((function(t){if(t.exists){o.itemDataBefore=t.data();var e=Object.assign({},o.$molleModules[o.itemDataBefore.moduleId].def,t.data());o.$set(o,"itemData",e),o.$set(o,"itemId",t.id),o.flag=!0}})))}},{key:"update",value:function(){var t=this;function e(b,a){var t=Object.assign({},b,a);return Object.keys(t).some((function(o){return"object"==Object(m.a)(t[o])?e(b[o]||{},a[o]||{}):b[o]!=a[o]}))}var o=!1,n={},r=this.itemDataBefore,c=JSON.parse(JSON.stringify(this.itemData)),l=Object.assign({},r,c);if(Object.keys(l).forEach((function(t){Object(m.a)(r[t])!=Object(m.a)(c[t])?(n[t]=c[t],o=!0):"object"==Object(m.a)(l[t])?e(r[t]||{},c[t]||{})&&(n[t]=c[t],o=!0):r[t]!=c[t]&&(n[t]=c[t],o=!0)})),console.log(o,"update",this.itemId,n),o){var f=y.a.firestore().batch(),d=y.a.firestore.Timestamp.now();v.a.logsRef.doc(this.itemId).get().then((function(e){var data=e.data();if(data){var o=data.history||[];o.unshift({timestamp:d,uid:y.a.auth().currentUser.uid,update:n}),o.length>t.maxHistory&&(o.length=t.maxHistory),f.update(v.a.logsRef.doc(t.itemId),{history:o})}f.update(v.a.itemsRef.doc(t.itemId),n),f.commit()}))}}},{key:"moduleChange",value:function(){var t=this;if(console.log("moduleChangeスタート"),this.changeModuleSelected){var e={moduleId:this.changeModuleSelected},o=y.a.firestore().batch(),n=y.a.firestore.Timestamp.now();v.a.logsRef.doc(this.itemId).get().then((function(r){var data=r.data();if(data){var c=data.history||[];c.unshift({timestamp:n,uid:y.a.auth().currentUser.uid,update:e}),c.length>t.maxHistory&&(c.length=t.maxHistory),o.update(v.a.logsRef.doc(t.itemId),{history:c})}e.updateTime=y.a.firestore.FieldValue.serverTimestamp(),o.update(v.a.itemsRef.doc(t.itemId),e),o.commit()})),e.updateTime=y.a.firestore.FieldValue.serverTimestamp(),v.a.itemsRef.doc(this.itemId).update(e)}}}]),o}(h.Vue);T([Object(h.Watch)("$route.query.focus",{immediate:!0})],L.prototype,"onChangeFocusModuleNode",null);var S=L=T([Object(h.Component)({components:{LogPropertyComp:A}})],L),U=(o(357),Object(D.a)(S,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.$route.query.focus?o("div",{staticClass:"module-property-comp"},[t.flag?o("div",{staticClass:"card bg-light"},[o("div",{staticClass:"card-header pt-1 pb-1 pl-3 pr-3"},[o("span",[t._v(t._s(t.itemData.moduleId)+" プロパティ")]),t.$molleModules[t.itemData.moduleId].convert?o("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{id:"moduleChange"}},[o("b-icon",{attrs:{icon:"arrow-repeat"}})],1):t._e(),o("b-popover",{attrs:{target:"moduleChange",title:"change type",triggers:"focus",placement:"bottom",container:"bootstrap-container"},on:{show:function(){return t.changeModuleSelected=t.$molleModules[t.itemData.moduleId].convert[0]}}},[o("form",{staticClass:"form-group form-check-inline",on:{submit:[function(t){t.preventDefault()},function(e){return t.moduleChange()}]}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.changeModuleSelected,expression:"changeModuleSelected"}],staticClass:"form-control form-control-sm",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.changeModuleSelected=e.target.multiple?o:o[0]}}},t._l(t.$molleModules[t.itemData.moduleId].convert,(function(e){return o("option",{domProps:{value:e,innerHTML:t._s(e)}})})),0),o("button",{staticClass:"btn btn-sm btn-info",attrs:{type:"submit"}},[t._v("+")])])])],1),o("div",{staticClass:"card-body p-3"},[t.$molleModules[t.itemData.moduleId].profile?o(t.$molleModules[t.itemData.moduleId].profileName,{tag:"component",attrs:{itemData:t.itemData,itemId:t.itemId},on:{change:t.update}}):t._e(),o("hr"),o("label",{staticClass:"mr-2"},[o("div",{staticClass:"u_auto-input"},[o("span",{staticClass:"u_auto-input__static form-control form-control-sm",domProps:{innerHTML:t._s(t.itemData.name||"name")}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.itemData.name,expression:"itemData.name"}],staticClass:"u_auto-input__input form-control form-control-sm",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.itemData.name},on:{change:t.update,input:function(e){e.target.composing||t.$set(t.itemData,"name",e.target.value)}}})])]),o("label",{staticClass:"mr-2"},[t._v("id"),o("div",{staticClass:"u_auto-input"},[o("span",{staticClass:"u_auto-input__static form-control form-control-sm",domProps:{innerHTML:t._s(t.itemData.tagId||"id")}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.itemData.tagId,expression:"itemData.tagId"}],staticClass:"u_auto-input__input form-control form-control-sm",attrs:{type:"text",placeholder:"id"},domProps:{value:t.itemData.tagId},on:{change:t.update,input:function(e){e.target.composing||t.$set(t.itemData,"tagId",e.target.value)}}})])]),o("label",{staticClass:"mr-2"},[t._v("class"),o("div",{staticClass:"u_auto-input"},[o("span",{staticClass:"u_auto-input__static form-control form-control-sm",domProps:{innerHTML:t._s(t.itemData.tagClass||"class")}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.itemData.tagClass,expression:"itemData.tagClass"}],staticClass:"u_auto-input__input form-control form-control-sm",attrs:{type:"text",placeholder:"class"},domProps:{value:t.itemData.tagClass},on:{change:t.update,input:function(e){e.target.composing||t.$set(t.itemData,"tagClass",e.target.value)}}})])]),o("hr"),o("LogPropertyComp",{attrs:{itemId:t.itemId}}),o("label",{staticClass:"small form-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.itemData.noExport,expression:"itemData.noExport"}],staticClass:"form-control form-control-sm",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.itemData.noExport)?t._i(t.itemData.noExport,null)>-1:t.itemData.noExport},on:{change:[function(e){var o=t.itemData.noExport,n=e.target,r=!!n.checked;if(Array.isArray(o)){var c=t._i(o,null);n.checked?c<0&&t.$set(t.itemData,"noExport",o.concat([null])):c>-1&&t.$set(t.itemData,"noExport",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.itemData,"noExport",r)},t.update]}}),o("span",[t._v(":書き出さない")])]),o("p",{staticClass:"mb-0 text-right"},[o("span",{staticClass:"small text-nowrap"},[t._v("ID : "+t._s(t.$route.query.focus))]),o("a",{staticClass:"ml-2 text-nowrap",attrs:{href:t.firestoreUrl+t.itemId,target:"firestore"}},[o("span",[t._v(">firestore")]),o("b-icon",{staticClass:"ml-2",attrs:{icon:"window"}})],1)])],1)]):t._e()]):t._e()}),[],!1,null,null,null).exports),H=o(226),G=o(227);function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var F=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},V=function(t){Object(l.a)(o,t);var e=J(o);function o(){return Object(r.a)(this,o),e.apply(this,arguments)}return Object(c.a)(o,[{key:"onChangePageData",value:function(t,e){}},{key:"update",value:function(){v.a.pagesRef.doc(this.pageId).update(this.pageData)}}]),o}(h.Vue);F([Object(h.Prop)()],V.prototype,"pageData",void 0),F([Object(h.Prop)()],V.prototype,"pageId",void 0),F([Object(h.Watch)("pageData",{immediate:!0})],V.prototype,"onChangePageData",null);var W=V=F([Object(h.Component)({components:{InputUrlByGS:G.a,GoogleStorage:H.a}})],V),X=(o(358),Object(D.a)(W,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.$route.query.focus&&0!=t.$route.query.focus?t._e():o("div",{staticClass:"page-property-comp"},[o("div",{staticClass:"card bg-light"},[o("div",{staticClass:"card-header pt-1 pb-1 pl-3 pr-3"},[t._v("ページ設定")]),o("div",{staticClass:"card-body p-3"},[o("label",[o("span",[t._v("Title (meta):")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pageData.title,expression:"pageData.title"}],staticClass:"form-control form-control-sm",attrs:{placeholder:t.pageData.displayTitle},domProps:{value:t.pageData.title},on:{change:t.update,input:function(e){e.target.composing||t.$set(t.pageData,"title",e.target.value)}}})]),o("label",[o("span",[t._v("Title (表示用):")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pageData.displayTitle,expression:"pageData.displayTitle"}],staticClass:"form-control form-control-sm",attrs:{placeholder:t.pageData.title},domProps:{value:t.pageData.displayTitle},on:{change:t.update,input:function(e){e.target.composing||t.$set(t.pageData,"displayTitle",e.target.value)}}})]),o("label",[o("span",[t._v("Description (meta):")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pageData.description,expression:"pageData.description"}],staticClass:"form-control form-control-sm",domProps:{value:t.pageData.description},on:{change:t.update,input:function(e){e.target.composing||t.$set(t.pageData,"description",e.target.value)}}})]),o("label",[o("span",[t._v("日付(表示用):")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.date,expression:"pageData.date"}],staticClass:"form-control form-control-sm",attrs:{type:"date"},domProps:{value:t.pageData.date},on:{change:t.update,input:function(e){e.target.composing||t.$set(t.pageData,"date",e.target.value)}}})]),o("InputUrlByGS",{attrs:{label:"OGP画像:"},on:{change:t.update},model:{value:t.pageData.ogpImg,callback:function(e){t.$set(t.pageData,"ogpImg",e)},expression:"pageData.ogpImg"}}),o("InputUrlByGS",{attrs:{label:"サムネイル:"},on:{change:t.update},model:{value:t.pageData.thumb,callback:function(e){t.$set(t.pageData,"thumb",e)},expression:"pageData.thumb"}}),o("GoogleStorage"),o("hr"),o("label",{staticClass:"small form-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.noExport,expression:"pageData.noExport"}],staticClass:"form-control form-control-sm",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.pageData.noExport)?t._i(t.pageData.noExport,null)>-1:t.pageData.noExport},on:{change:[function(e){var o=t.pageData.noExport,n=e.target,r=!!n.checked;if(Array.isArray(o)){var c=t._i(o,null);n.checked?c<0&&t.$set(t.pageData,"noExport",o.concat([null])):c>-1&&t.$set(t.pageData,"noExport",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.pageData,"noExport",r)},t.update]}}),o("span",[t._v(":書き出さない")])]),o("label",[o("span",[t._v("Preview:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.preview,expression:"pageData.preview"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"/"+t.pageData.path},domProps:{value:t.pageData.preview},on:{change:t.update,input:function(e){e.target.composing||t.$set(t.pageData,"preview",e.target.value)}}})]),o("p",{staticClass:"small"},[o("span",[t._v("/")]),o("a",{attrs:{href:"/"+(t.pageData.preview||t.pageData.path),target:"_blank"}},[o("span",{domProps:{innerHTML:t._s(""+(t.pageData.preview||t.pageData.path))}}),o("b-icon",{staticClass:"ml-2",attrs:{icon:"window"}})],1)]),o("p",{staticClass:"small"},[o("span",[t._v("itemId:")]),o("span",{domProps:{innerHTML:t._s(t.pageData.itemId)}})])],1)])])}),[],!1,null,null,null).exports),Z=o(329),z=o(350);function Q(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function Y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Q(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Q(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var tt=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},et=function(t){Object(l.a)(o,t);var e=K(o);function o(){var t;return Object(r.a)(this,o),(t=e.apply(this,arguments)).flag=!1,t.hiddedUi=!1,t}return Object(c.a)(o,[{key:"mounted",value:function(){}},{key:"onChangeHiddedUi",value:function(){this.$router.push({query:Y(Y({},this.$route.query),{},{hidden:this.hiddedUi})})}}]),o}(h.Vue);tt([Object(h.Watch)("hiddedUi")],et.prototype,"onChangeHiddedUi",null);var ot=et=tt([Object(h.Component)({components:{}})],et),at=(o(359),Object(D.a)(ot,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"editor-option-comp"},[o("div",{staticClass:"card bg-light"},[o("div",{staticClass:"card-header pt-1 pb-1 pl-3 pr-3",on:{click:function(e){t.flag=!t.flag}}},[t._v("Editor設定"),o("b-icon",{attrs:{icon:t.flag?"chevron-up":"chevron-down"}})],1),t.flag?o("div",{staticClass:"card-body p-3"},[o("label",{staticClass:"form-inline"},[o("span",[t._v("UI非表示:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.hiddedUi,expression:"hiddedUi"}],staticClass:"form-control form-control-sm",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.hiddedUi)?t._i(t.hiddedUi,null)>-1:t.hiddedUi},on:{change:function(e){var o=t.hiddedUi,n=e.target,r=!!n.checked;if(Array.isArray(o)){var c=t._i(o,null);n.checked?c<0&&(t.hiddedUi=o.concat([null])):c>-1&&(t.hiddedUi=o.slice(0,c).concat(o.slice(c+1)))}else t.hiddedUi=r}}})])]):t._e()])])}),[],!1,null,null,null).exports);o(239),o(125),o(40),o(86);function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var it=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},ct=function(t){Object(l.a)(o,t);var e=nt(o);function o(){var t;return Object(r.a)(this,o),(t=e.apply(this,arguments)).isShow=!1,t.source="",t.src="",t.hAlign={current:"center",option:{left:Jimp.HORIZONTAL_ALIGN_LEFT,center:Jimp.HORIZONTAL_ALIGN_CENTER,right:Jimp.HORIZONTAL_ALIGN_RIGHT}},t.vAlign={current:"middle",option:{top:Jimp.VERTICAL_ALIGN_TOP,middle:Jimp.VERTICAL_ALIGN_MIDDLE,bottom:Jimp.VERTICAL_ALIGN_BOTTOM}},t.mime={option:{jpg:Jimp.MIME_JPEG,png:Jimp.MIME_PNG}},t.profiles={current:0,option:[{label:"1:1 JPEG 80%",mime:"jpg",width:800,height:800,quality:80},{label:"3:2 JPEG 80%",mime:"jpg",width:1200,height:800,quality:80},{label:"800:auto JPEG 80%",mime:"jpg",width:800,height:"auto",quality:80}]},t.option={name:"",mime:t.profiles.option[t.profiles.current].mime,width:"",height:""},t.jimpImg={},t}return Object(c.a)(o,[{key:"mounted",value:function(){var t=this;this.$root.$on("google-storage-view",(function(){window.open("https://console.firebase.google.com/project/".concat("molle-cms---dev","/storage/").concat("molle-cms---dev.appspot.com","/files~2F").concat("labo"),"google-storage-view")})),this.$root.$on("google-storage-upload",(function(e){t.callBack=e,t.isShow=!0}))}},{key:"cahngeProfile",value:function(){var t=this.profiles.option[this.profiles.current];this.$set(this.option,"mime",t.mime),this.onJimp()}},{key:"onJimp",value:function(){var t=this;if(this.jimpImg.bitmap){var e=this.profiles.option[this.profiles.current];console.log(e);try{var o=this.option.width||e.width,n=this.option.height||e.height,img=this.jimpImg.clone();"auto"==o?img.resize(Jimp.AUTO,Number.parseInt(n+"")):"auto"==n?img.resize(Number.parseInt(o+""),Jimp.AUTO):img.cover(Number.parseInt(o+""),Number.parseInt(n+""),this.hAlign.option[this.hAlign.current]|this.vAlign.option[this.vAlign.current]),img.quality(e.quality||80).getBase64(this.mime.option[e.mime],(function(e,o){t.src=o}))}catch(t){console.log(t),this.src=""}}}},{key:"onImport",value:function(t){var e=this;this.files=t.target.files;var o=new FileReader;o.onload=function(t){e.source=t.target.result,Jimp.read(t.target.result).then((function(img){e.$set(e,"jimpImg",img),e.onJimp()}))},o.readAsDataURL(this.files[0]),this.option.name=this.files[0].name.match(/([^/]+)\./)[1]}},{key:"save",value:function(){var t=this,e=y.a.storage().ref().child("".concat("labo","/").concat(this.option.name,".").concat(this.option.mime));e.putString(this.src,"data_url").then((function(o){t.callBack&&t.callBack("https://storage.googleapis.com/".concat("molle-cms---dev.appspot.com","/").concat(e.fullPath)),t.isShow=!1}))}},{key:"upload",value:function(){var t=this,e=y.a.storage().ref().child("".concat("labo","/").concat(this.files[0].name));e.putString(this.source,"data_url").then((function(o){t.callBack&&t.callBack("https://storage.googleapis.com/".concat("molle-cms---dev.appspot.com","/").concat(e.fullPath)),t.isShow=!1}))}}]),o}(h.Vue),st=ct=it([Object(h.Component)({components:{}})],ct),lt=(o(360),Object(D.a)(st,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isShow?o("div",{staticClass:"google-storage-modal-comp"},[o("div",{staticClass:"modal",attrs:{"aria-expanded":t.isShow}},[o("div",{staticClass:"modal__fiexd"},[o("div",{staticClass:"modal__close",on:{click:function(e){t.isShow=!t.isShow}}}),o("div",{staticClass:"modal__body bootstrap"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-6"},[o("img",{attrs:{src:t.src}}),o("span",{staticClass:"form-inline"},[o("input",{staticClass:"form-control-sm form-control-file",attrs:{type:"file",name:"files",accept:"image/png,image/jpeg,image/gif"},on:{change:t.onImport}}),o("button",{staticClass:"btn btn-primary ml-auto",attrs:{disabled:!t.source},on:{click:t.upload}},[o("span",[t._v("アップロード")])])]),o("p",{staticClass:"caption text-right"},[t._v("*未加工でアップされます")])]),o("div",{staticClass:"col-6"},[o("div",{staticClass:"form-inline"},[o("label",[t._v("プロファイル"),o("select",{directives:[{name:"model",rawName:"v-model",value:t.profiles.current,expression:"profiles.current"}],staticClass:"form-control form-control-sm",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.profiles,"current",e.target.multiple?o:o[0])},t.cahngeProfile]}},t._l(t.profiles.option,(function(e,i){return o("option",{domProps:{value:i}},[t._v(t._s(e.label))])})),0)])]),t.jimpImg.bitmap?o("table",{staticClass:"table"},[o("tbody",[t._m(0),o("tr",[o("th",[t._v("file")]),o("td",[t._v(t._s(t.files[0].name))]),o("td",[o("span",{staticClass:"form-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.option.name,expression:"option.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text"},domProps:{value:t.option.name},on:{input:function(e){e.target.composing||t.$set(t.option,"name",e.target.value)}}}),o("span",[t._v("."+t._s(t.option.mime))])])])]),o("tr",[o("th",[t._v("MIME")]),o("td",[t._v(t._s(t.jimpImg._originalMime))]),o("td",[o("select",{directives:[{name:"model",rawName:"v-model",value:t.option.mime,expression:"option.mime"}],staticClass:"form-control form-control-sm",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.option,"mime",e.target.multiple?o:o[0])}}},t._l(t.mime.option,(function(e,n){return o("option",{domProps:{value:n}},[t._v(t._s(n))])})),0)])]),"jpg"==t.option.mime?o("tr",[o("th",[t._v("Quality")]),o("td"),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.option.quality,expression:"option.quality"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:t.profiles.option[t.profiles.current].quality},domProps:{value:t.option.quality},on:{change:t.onJimp,input:function(e){e.target.composing||t.$set(t.option,"quality",e.target.value)}}})])]):t._e(),o("tr",[o("th",[t._v("Width")]),o("td",[t._v(t._s(t.jimpImg.bitmap.width)+"px")]),o("td",[o("span",{staticClass:"form-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.option.width,expression:"option.width"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:t.profiles.option[t.profiles.current].width},domProps:{value:t.option.width},on:{change:t.onJimp,input:function(e){e.target.composing||t.$set(t.option,"width",e.target.value)}}}),o("span",[t._v('px or "auto"')])])])]),o("tr",[o("th",[t._v("Height")]),o("td",[t._v(t._s(t.jimpImg.bitmap.height)+"px")]),o("td",[o("span",{staticClass:"form-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.option.height,expression:"option.height"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:t.profiles.option[t.profiles.current].height},domProps:{value:t.option.height},on:{change:t.onJimp,input:function(e){e.target.composing||t.$set(t.option,"height",e.target.value)}}}),o("span",[t._v('px or "auto"')])])])])])]):t._e(),o("div",{staticClass:"form-inline"},[o("span",[t._v("中心点：")]),o("label",[t._v("横"),o("select",{directives:[{name:"model",rawName:"v-model",value:t.hAlign.current,expression:"hAlign.current"}],staticClass:"form-control form-control-sm",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.hAlign,"current",e.target.multiple?o:o[0])},t.onJimp]}},t._l(t.hAlign.option,(function(e,n){return o("option",{domProps:{value:n}},[t._v(t._s(n))])})),0)]),o("label",[t._v("縦"),o("select",{directives:[{name:"model",rawName:"v-model",value:t.vAlign.current,expression:"vAlign.current"}],staticClass:"form-control form-control-sm",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.vAlign,"current",e.target.multiple?o:o[0])},t.onJimp]}},t._l(t.vAlign.option,(function(e,n){return o("option",{domProps:{value:n}},[t._v(t._s(n))])})),0)])]),o("p",{staticClass:"text-right"},[o("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.src},on:{click:t.save}},[o("span",[t._v("書き出し&アップロード")])])])])])])])])]):t._e()}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",[o("th"),o("th",[t._v("Source")]),o("th",[t._v("Result")])])}],!1,null,null,null).exports),ut=o(225);o(126);function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var ft=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},mt=function(t){Object(l.a)(o,t);var e=pt(o);function o(){var t;return Object(r.a)(this,o),(t=e.apply(this,arguments)).itemData={},t.itemDataParent={},t.itemDataGrandchild={},t.totalCount=0,t.totalCountloop=0,t.totalCountcreateloop=0,t.updateTime=y.a.firestore.Timestamp.now(),t.maxHistory=100,t}return Object(c.a)(o,[{key:"loop",value:function(t,e,o){var n=this;console.log("loopスタート",t,e),this.totalCount++,v.a.itemsRef.doc(t.value[e].id).get().then((function(r){var c=r.data();if(console.log("loopでitemデータ取得",c),t.value[e].id=v.a.itemsRef.doc().id,t.value[e].obj=c,console.log("loopでobjを設定",t.value[e].obj),"children"==c.type)!function(){console.log("loopでchildrenだった時");var t,e=0;for(var i in console.log("loopのfor文の直前"),c.value)console.log("loopのfor文の1行目",i),t=Number(i),e++,n.loop(c,t,(function(){console.log("loop内のloopからの戻り"),0==--e&&(console.log("loopでchildrenだった時の終了"),n.totalCountloop++,o())}))}();else{if("group"==c.type)return void alert("カスタムモジュールはコピーできません");console.log("loopでchildrenじゃなかった時の終了"),n.totalCountloop++,o()}}))}},{key:"pushCopy",value:function(){var t=this;console.log("pushCopyスタート");var e,o={id:v.a.itemsRef.doc().id};v.a.itemsRef.doc().id;this.beforeNode&&(e=this.beforeNode),this.afterNode&&(e=this.afterNode),v.a.itemsRef.doc(e.id).get().then((function(e){var n=e.data();if(console.log("コピー対象のデータ取得",n),"children"==n.type)!function(){var e;for(var i in console.log("for文１の直前"),n.value)console.log("for文１の1行目",i),e=Number(i),t.loop(n,e,(function(){if(console.log("loop呼んだあと",e,n),t.totalCount===t.totalCountloop){console.log("completeの設定",t.totalCount);var r=n;console.log("createLoopを最初に呼ぶところ"),function e(n,r){var c;y.a.firestore().batch();if(console.log("for文２の直前",n),"children"==n.type)for(var l in n.value)console.log("for文２の1行目",l),c=Number(l),console.log("for文２でchildrenの時（createLoopを呼ぶところ）",n.value[c].obj),e(n.value[c].obj,n.value[c].id);if(console.log("objを削除するところ",n.value[0].obj),n.value[0].obj)for(var f in n.value)delete n.value[f].obj;n.createTime=t.updateTime,console.log("createするところ",r,n),v.a.itemsRef.doc(r).set(n).then((function(){t.totalCountcreateloop++,t.totalCount<t.totalCountcreateloop&&t.parentUpdate(o)})),v.a.logsRef.doc(r).set({history:[{timestamp:t.updateTime,uid:y.a.auth().currentUser.uid}]})}(r,o.id)}}))}();else{if("group"==n.type)return void alert("カスタムモジュールはコピーできません");console.log("boxのコピーじゃない時"),n.createTime=t.updateTime,v.a.itemsRef.doc(o.id).set(n).then((function(){t.parentUpdate(o)}))}}))}},{key:"parentUpdate",value:function(t){var e=this;console.log("parentUpdateスタート",this.parentNode.id),v.a.itemsRef.doc(this.parentNode.id).get().then((function(o){console.log("親のデータ取得");var n=o.data();console.log("snap.data",o.data()),console.log("itemDataParent処理前",n),n.value||(n.value=[]),e.beforeNode?(n.value.some((function(o,i){if(e.beforeNode.id==o.id)return n.value.splice(i,0,t),!0})),console.log("beforeNode処理後",e.beforeNode,n)):e.afterNode?(console.log("afterNode",e.afterNode),n.value.some((function(o,i){if(e.afterNode.id==o.id)return n.value.splice(i+1,0,t),!0}))):n.value.push(t),v.a.itemsRef.doc(e.parentNode.id).update(n).then((function(){console.log("コピー完了")})),v.a.logsRef.doc(e.parentNode.id).get().then((function(t){var data=t.data();if(data){var o=data.history||[];o.unshift({timestamp:e.updateTime,uid:y.a.auth().currentUser.uid,update:{value:n.value}}),o.length>e.maxHistory&&(o.length=e.maxHistory),v.a.logsRef.doc(e.parentNode.id).update({history:o})}}))}))}},{key:"update",value:function(t,data){}},{key:"beforeDestroy",value:function(){this.unsubscribe&&this.unsubscribe()}}]),o}(h.Vue);ft([Object(h.Prop)()],mt.prototype,"label",void 0),ft([Object(h.Prop)()],mt.prototype,"parentNode",void 0),ft([Object(h.Prop)()],mt.prototype,"beforeNode",void 0),ft([Object(h.Prop)()],mt.prototype,"afterNode",void 0);var ht=mt=ft([Object(h.Component)({components:{}})],mt),vt=(o(361),Object(D.a)(ht,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return"true"!==this.$route.query.hidden?o("div",{staticClass:"copy-module-comp bootstrap"},[o("button",{staticClass:"btn btn-sm btn-outline-info",attrs:{type:"button"},on:{click:t.pushCopy}},[t._v("Copy")])]):t._e()}),[],!1,null,null,null).exports),gt=o(163);function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var yt=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},Ot=function(t){Object(l.a)(o,t);var e=bt(o);function o(){var t;return Object(r.a)(this,o),(t=e.apply(this,arguments)).itemId="",t.loader={},t.style={},t.sibling={},t.isBefore=!0,t.isAfter=!0,t}return Object(c.a)(o,[{key:"mounted",value:function(){this.enterFrame(),this.changeFocus(this.$route.query.focus+"")}},{key:"changeFocus",value:function(t){var e=gt.a.modules[t];e&&(this.itemId=this.$route.query.focus+"",this.$set(this,"loader",e),this.isBefore=this.isAfter=!(!e.fromModule.itemData||"group"==e.fromModule.itemData.type),this.isAfter&&e.fromModule.itemData.value[e.fromModule.itemData.value.length-1].id==this.itemId&&(this.isAfter=!1))}},{key:"enterFrame",value:function(){var t=this;try{var rect=this.loader.toModule.$el.getBoundingClientRect();this.$set(this,"style",{top:pageYOffset+rect.top+"px",left:pageXOffset+rect.left+"px",width:rect.width+"px",height:rect.height+"px"})}catch(t){this.$set(this,"style",{display:"none"})}setTimeout((function(){return t.enterFrame()}),Math.floor(100))}},{key:"beforeDestroy",value:function(){}}]),o}(h.Vue);yt([Object(h.Watch)("$route.query.focus")],Ot.prototype,"changeFocus",null);var _t=Ot=yt([Object(h.Component)({components:{AddModuleComp:ut.a,CopyModuleComp:vt}})],Ot),jt=(o(362),Object(D.a)(_t,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.$route.query.focus,expression:"$route.query.focus"}],staticClass:"focus-extension bootstrap",style:t.style,attrs:{"data-is-row":t.sibling.isRow}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.isBefore,expression:"isBefore"}],staticClass:"focus-extension__before"},[o("button",{staticClass:"btn btn-sm btn-outline-info",attrs:{id:"addBefore"}},[o("b-icon",{attrs:{icon:"plus"}}),o("span",[t._v("Before")])],1),o("b-popover",{attrs:{target:"addBefore",triggers:"focus",placement:t.sibling.isRow?"bottom":"right",container:"bootstrap-container"}},[t.loader.fromModule&&t.loader.fromModule.loader?o("div",[o("AddModuleComp",{attrs:{parentNode:t.loader.fromModule.loader.node,beforeNode:t.loader.node}}),o("CopyModuleComp",{attrs:{parentNode:t.loader.fromModule.loader.node,beforeNode:t.loader.node}})],1):t._e()])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isAfter,expression:"isAfter"}],staticClass:"focus-extension__after"},[o("button",{staticClass:"btn btn-sm btn-outline-info",attrs:{id:"addAfter"}},[o("b-icon",{attrs:{icon:"plus"}}),o("span",[t._v("After")])],1),o("b-popover",{attrs:{target:"addAfter",triggers:"focus",placement:t.sibling.isRow?"bottom":"right",container:"bootstrap-container"}},[t.loader.fromModule&&t.loader.fromModule.loader?o("div",[t.loader.fromModule&&t.loader.fromModule.loader?o("AddModuleComp",{attrs:{parentNode:t.loader.fromModule.loader.node,afterNode:t.loader.node}}):t._e(),t.loader.fromModule&&t.loader.fromModule.loader?o("CopyModuleComp",{attrs:{parentNode:t.loader.fromModule.loader.node,afterNode:t.loader.node}}):t._e()],1):t._e()])],1)])}),[],!1,null,null,null).exports);function Ct(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function Dt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ct(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ct(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(d.a)(t);if(e){var r=Object(d.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(f.a)(this,o)}}var wt=function(t,e,o,desc){var n,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},xt=function(t){Object(l.a)(o,t);var e=Rt(o);function o(){var t;return Object(r.a)(this,o),(t=e.apply(this,arguments)).pageData={},t.theme="",t.ready=!1,t.panelOption={unsubscribe:function(){},left:{value:200},right:{value:200}},t}return Object(c.a)(o,[{key:"head",value:function(){return{script:[{src:"https://cdnjs.cloudflare.com/ajax/libs/jimp/0.16.1/jimp.js"}]}}},{key:"created",value:function(){var t=this;v.a.firebaseInit((function(){t.pageId=t.$route.query.pageId,t.unsubscribe=y.a.firestore().doc("".concat(v.a.prefix,"/pages/").concat(t.pageId)).onSnapshot((function(e){if(e.exists){var o=e.data();0==o.path.indexOf("news/")?t.$set(t,"theme","NewsDetailPage"):t.$set(t,"theme","UniversalPage"),console.log(o),t.$set(t,"pageData",o)}else console.log("no page data")}))}));var e=setInterval((function(){window.Jimp&&(t.ready=!0,clearInterval(e))}),100)}},{key:"mounted",value:function(){var t=this;this.$el.addEventListener("mouseover",(function(e){for(var i=0;i<e.path.length;i++){var o=e.path[i].__vue__;if(o&&o instanceof gt.a){var n=o;t.$router.push({query:Dt(Dt({},t.$route.query),{},{hover:n.$props.node.id})});break}}})),this.$el.addEventListener("click",(function(e){for(var i=0;i<e.path.length;i++){var o=e.path[i].__vue__;if(o&&o instanceof gt.a){var n=o;t.$router.push({query:Dt(Dt({},t.$route.query),{},{focus:n.$props.node.id})});break}}}))}},{key:"onChangeFocusModuleNode",value:function(t,e){if(console.log(t),t){var o=window.innerHeight;try{var n=this.$refs.left,r=n.querySelector('[data-item-id="'.concat(t,'"]')).getBoundingClientRect().top;(r<.1*o||r>.9*o)&&(r-=.2*o,r+=n.scrollTop,n.scrollTo({top:r,behavior:"smooth"}))}catch(t){}try{var c=this.$refs.main.$el.querySelector('[data-item-id="'.concat(t,'"]')).getBoundingClientRect().top;(c<.1*o||c>.9*o)&&(c-=.2*o,c+=pageYOffset,window.scrollTo({top:c,behavior:"smooth"}))}catch(t){}}}},{key:"onSidebar",value:function(t,e){var o=this,option=this.panelOption[e];this.panelOption.unsubscribe();var n=!0,r="right"==e?window.innerWidth-t.clientX:t.clientX,c=function(t){t.preventDefault(),r="right"==e?window.innerWidth-t.clientX:t.clientX},l=function(t){o.panelOption.unsubscribe()};window.addEventListener("mousemove",c),window.addEventListener("mouseup",l),function t(){o.$set(option,"value",r>50?r:0),n&&requestAnimationFrame((function(){return t()}))}(),this.panelOption.unsubscribe=function(){window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",l),n=!1}}},{key:"beforeDestroy",value:function(){this.unsubscribe&&this.unsubscribe()}}]),o}(h.Vue);wt([Object(h.Watch)("$route.query.focus",{immediate:!0})],xt.prototype,"onChangeFocusModuleNode",null);var Pt=xt=wt([Object(h.Component)({components:{FocusExtension:jt,GoogleStorageModalComp:lt,UniversalPage:Z.default,NewsDetailPage:z.default,PagePropertyComp:X,ModulePropertyComp:U,ItemListViewComp:R,EditorOptionComp:at}})],xt),It=(o(363),Object(D.a)(Pt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.pageData.itemId?o("div",{staticClass:"l-molle"},[o("div",{staticClass:"l-molle__left bootstrap shadow",style:{width:t.panelOption.left.value+"px"}},[o("div",{ref:"left",staticClass:"l-molle__scroll pb-4"},[o("div",{staticClass:"card bg-light"},[o("div",{staticClass:"card-header pt-1 pb-1 pl-3 pr-3 text-right"},[o("a",{attrs:{href:"/--molle/"}},[o("b-icon",{attrs:{icon:"house-door"}}),o("span",[t._v("Molle TOP")])],1)])]),o("ItemListViewComp",{attrs:{itemId:t.pageData.itemId}})],1),o("div",{staticClass:"l-molle__side-bar",on:{mousedown:function(e){return t.onSidebar(e,"left")}}})]),o("div",{staticClass:"l-molle__main"},[o(t.theme,{ref:"main",tag:"component",attrs:{pageDataByEditer:t.pageData}})],1),o("div",{staticClass:"l-molle__right bootstrap shadow",style:{width:t.panelOption.right.value+"px"}},[o("div",{staticClass:"l-molle__scroll"},[o("EditorOptionComp"),o("PagePropertyComp",{attrs:{pageData:t.pageData,pageId:t.pageId}}),o("ModulePropertyComp")],1),o("div",{staticClass:"l-molle__side-bar",on:{mousedown:function(e){return t.onSidebar(e,"right")}}})]),t.ready?o("GoogleStorageModalComp"):t._e()],1):t._e(),o("FocusExtension"),o("div",{staticClass:"bootstrap",attrs:{id:"bootstrap-container"}})],1)}),[],!1,null,null,null));e.default=It.exports}}]);